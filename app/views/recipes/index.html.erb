<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.3/components/grid.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.3/components/card.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.3/semantic.css">
</head>
<body>

<div class="wrapper">
  <div class="one wide column">
    <div class="header-box">
      <h1>Header</h1>
      <p>Welcome, <%= @user.username%>! Please search for a recipe that you can make for your dinner party. </p>
    </div>
</div>

<div class="one wide column">
  <div class="recipe-search">
    <h2>Search for Recipes</h2>
    <%= form_tag("/recipes", method: "get") do %>
    <%= label_tag(:q, "Search recipes:") %>
    <%= text_field_tag(:q) %>
    <%= submit_tag("Search") %>
    <% end %>
  </div>
</div>  
<div class="ui divider"></div>
<div class="one wide column">
  <div class="word-cloud">
  </div>
</div>
<div class="ui divider"></div>
<div id="nominated-header"><h1>Nominated Recipes Will Appear Here</h1></div>
<div class="one wide column nominated-results">
  <div class="ui cards nominated">
  


  <%if @recipe_array.length < 1 %>
    <% puts "no recipes" %>
  <%else%>
    <% @recipe_array.each do |element| %>
      <% if element[:nominated] == true%>
        <div class="three wide column result">
          <p><%=element.name%></p>
          <p><%=element.course%></p>
          <p><%=element.ingredients%></p>
          <p><%=element.time%></p>     
          <p><%=element.nominated%></p> 
          <p>Upvotes:<%=element.upvotes%></p>
          <br>
          <form action='/recipes' method="PUT">
            <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>" />
            <input type="hidden" name="upvote" value="yes">
            <input type="hidden" name="name" value="<%=element.name%>">
            <button>Upvote</button>
          </form>
        </div>
      <%end%>
    <%end%>
   <%end%>
  </div>
</div>
<div class="ui divider"></div>
<div><h1>Search Results</h1></div>
<div class="one wide column search-results">
  <div class="ui cards">
      <% if @recipe_array.length < 1 %>
        <% puts "no recipes" %>
      <%else%>
      
      <% @recipe_array.each_with_index do |element, index| %>
           <div id="<%=element[:id]%>" class="card">
            <div class="content">
              <div class="header">
                <p id="recipe-name<%=element[:id]%>"><%=element['recipeName']%></p>
              </div>
              <div class="meta">
                <p id="course<%=element[:id]%>"><%=element['attributes']['course']%></p>
                <p id="cuisine<%=element[:id]%>"><%=element['attributes']['cuisine']%></p>
                <p id="rating<%=element[:id]%>">Rating: <%=element['rating']%></p>
                <p id="time<%=element[:id]%>">Time: <%=element['totalTimeInSeconds'].to_i / 60 %></p> 
              </div>
              <div class="description">
                <p id="ingredients<%=element[:id]%>"><span><%=element['ingredients']%></span></p>
              </div>
            </div>
            <div class="extra content">
              <div class="ui one buttons">
                <div id="nominate-button<%=element[:id]%>" class="ui basic green button nominate-button">Nominate</div>
              </div>
            </div>
          </div>
        <!-- </div> -->
        
        <%end%>

     <%end%>
  </div>
</div>
<div class="ui divider"></div>
  <div class="one wide column">
    <div class="dinner-party">
        <h1>Dinner Party Here</h1>
        Here is a loop of all the users in the dinner party:<br> 
        <%@party.users.each do |el|%>
        <%= el.username %> <br>
        <% end %>
        <br><br>
        
    </div>
  </div>
</div>

</body>
</html>